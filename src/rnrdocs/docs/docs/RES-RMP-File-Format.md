---
sidebar_position: 6
---

# Описание бинарного формата RES/RMP

###### Date: 2018.08 | Version: 0.1 | Авторы: Александр Евдокимов

**Глоссарий**
	
**-TODO-**
	
**Ссылки**

  1. Шаблон формата **RES/RMP** для 010 Editor. [Открыть](https://github.com/AlexKimov/HT2-RnR-tools/blob/master/formats/templates/RES.bt)
	
## Оглавление

**1.** Введение 

**2.** Общая структура формата
  
**3.** Секции

  **3.1** Секция COLORS 
  
  **3.2** Секция TEXTUREFILES 
  
  **3.3** Секция PALETTEFILES

  **3.4** Секция SOUNDFILES

  **3.5** Секция BACKFILES 
  
  **3.6** Секция MASKFILES

  **3.7** Секция MATERIALS  
  
  **3.8** Секция SOUNDS    
  
**Приложение 1.** Различие между форматами

## 1. Введение
Этот документ описывает структуру формата файла **RES/RMP** (в дальнейшем формат ресурсов), используемого в играх Дальнобойщики Путь к победе и Дальнобойщики 2 (описываются форматы для **версия 8**). Формат **RES/RMP** содержит ресурсы игры: текстуры, файлы масок, звуки, а также дополнительные параметры. 

Все переменные, перечисленные в таблицах, показаны в порядке их следования в файле.

## 2. Общая структура формата

Формат ресурсов может хранить 8 различных секций, которые не имеют строгого порядка, а также могут различаться по количеству секций в файле. Каждая секция начинается с идентификатора в виде строки с количеством элементов хранимых в секции (например "BACKFILES 5"). 3 секции служат для хранения различных параметров, еще 5 содержат массивы файлов ресурсов. 

#### Таблица 1. Секции

| №     | Секция                   | Описание    | 
| :---- | :------------------------ | :------------- |   
| **1** | COLORS                  | Таблица цветов ?? |
| **2** | TEXTUREFILES            | Файлы текстур игры (заголовок в формате .tga) |
| **3** | PALETTEFILES            | Файлы в формате .plm, содержат палитры |
| **4** | SOUNDFILES              | Файлы звуков в формате .wav |
| **5** | BACKFILES               | Текстуры ?? |
| **6** | MASKFILES               | Файлы масок в формате .msk  |
| **7** | MATERIALS               | Параметры материалов |
| **8** | SOUNDS                  | Названия звуков |

## 3. Секции

### 3.1 Секция COLORS 

Хранит таблицу цветов в виде массива строк длиной 6 байт с завершающим нулем на конце. Цвета имеют значения от 0 до 1. 

#### Таблица 2. Структура секции COLORS
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор COLORS |        |
| 2   | Таблица цветов              | см. Таблица 3 |

#### Таблица 3. Структура таблицы цветов 
| №   | Описание                      |
| :-- | :-------------------------- | 
| 1   | Строка вида "0.000" c завершающим нулем на конце | 

### 3.2 Секция TEXTUREFILES 

#### Таблица 4. Структура секции TEXTUREFILES
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор TEXTUREFILES |        |
| 2   | Файлы в формате .txr |   [WIKI](https://github.com/AlexKimov/HardTruck-RignRoll-file-formats/wiki/TXR-File-Format-RUS)     |
  
### 3.3 Секция PALETTEFILES

#### Таблица 5. Структура секции PALETTEFILES
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор PALETTEFILES |        |
| 2   | Файл в формате .plm |  [WIKI](https://github.com/AlexKimov/HardTruck-RignRoll-file-formats/wiki/PLM-File-Format-Rus)  |

### 3.4 Секция SOUNDFILES

#### Таблица 6. Структура секции SOUNDFILES
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор SOUNDFILES |        |
| 2   | Файлы в формате .wav | [WIKI (англ.)](https://en.wikipedia.org/wiki/WAV)       |

### 3.5 Секция BACKFILES 

#### Таблица 7. Структура секции BACKFILES
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор BACKFILES  |        |
| 2   | Файлы в формате .txr |  [WIKI](https://github.com/AlexKimov/HardTruck-RignRoll-file-formats/wiki/TXR-File-Format-RUS)  |
  
### 3.6 Секция MASKFILES

#### Таблица 6. Структура секции MASKFILES
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор MASKFILES  |        |
| 2   | Файлы в формате .msk |  [WIKI](https://github.com/AlexKimov/HardTruck-RignRoll-file-formats/wiki/MSK-File-Format-Rus)      |

### 3.7 Секция MATERIALS  

Хранит таблицу параметров материалов в виде массива строк с завершающим нулем на конце. Строка начинается с названия материала, затем идут параметры. Каждый параметр в строке отделяется пробелами и имеет числовое значение.

#### Таблица 7. Структура секции MATERIALS
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор MATERIALS |        |
| 2   | Таблица параметров материалов              | |

#### Таблица 8. Структура таблицы материалов
| №   | Описание                      |
| :-- | :-------------------------- | 
| 1   | Строка вида "throw ttx 2  RotPoint 0.5 0.5  rot 400" c завершающим нулем на конце, где текстом через пробел указан параметр материала и (если есть) его цифровое значение | 

#### Таблица 9. Параметры материалов
| №   | Параметр | Игра | Описание                      |
| :-- | :-- | :-- | :-------------------------- | 
| 1   | reflect   | Д1 | один параметр [0..1]   |
| 2   | specular   | Д1 | два параметра [0..1], [0..1]  |
| 3   | col    | Д1, Д2 | Индекс прозрачности цвета текстуры из палитры, один параметр |
| 4   | transp  | Д1, Д2 | Прозрачность текстуры, один параметр (0..1) |
| 5   | tex    | Д1, Д2 | Простая текстура, один параметр - индекс текстуры |
| 6   | ttx   | Д1, Д2 | Текстура с прозрачностью, один параметр - индекс текстуры |
| 7   | rot   | Д1, Д2  | Анимация/Вращение текстуры, один параметр - скорость вращения |
| 8   | RotPoint   | Д1, Д2 | Координаты центра вращения текстуры |
| 9   | power  | Д1  | один параметр    | 
| 10   | noz    | Д1, Д2 | Отключить буфер глубины, без параметров   | 
| 11   | nof    | Д1, Д2 | без параметров    | 
| 12   | notile   | Д1, Д2  | Без тайлинга (не заполнять полигон копиями текстуры), без параметров  | 
| 13   | move   | Д1, Д2 | Анимация/Движение текстуры, два параметра | 
| 14   | att    | Д1, Д2 | индекс текстуры, один параметр   | 
| 14   | coord   | Д1, Д2 | один параметр [2, 3]  | 
| 15   | env   | Д1, Д2 | Параметры отражения текстуры, два параметра | 
| 16   | notilev   | Д2 | Без тайлинга по координате v, без параметров  | 
| 17   | notileu   | Д2 | Без тайлинга по координате u, без параметров  | 
| 18   | bumpcoord   | Д2 | один параметр  | 
| 19   | alphamirr   | Д2 | один параметр    | 
| 20   | itx   | Д2 |  индекс текстуры, один параметр |
 
    Если у материала нет параметра tex, itx, ttx, а только col, то текстура заливается цветом, указанным в col

### 3.8 Секция SOUNDS 

Хранит таблицу названий звуков в виде массива строк с завершающим нулем на конце.

#### Таблица 10. Структура секции SOUNDS
| №   | Секция                      | Ссылки |
| :-- | :-------------------------- | :---   | 
| 1   | Строка-идентификатор SOUNDS |        |
| 2   | Таблица названий звуков     | см. Таблица 3 |

#### Таблица 11. Структура таблицы звуков
| №   | Описание                      |
| :-- | :-------------------------- | 
| 1   | Строка вида "Sound" c завершающим нулем на конце | 